# DeepRef Root Environment Configuration
# This file contains shared environment variables for the monorepo

# ============================================
# ENVIRONMENT
# ============================================
NODE_ENV=development

# ============================================
# APPLICATION CONFIGURATION
# ============================================
# Docker Compose Configuration
COMPOSE_PROJECT_NAME=deepref
COMPOSE_FILE=infrastructure/docker/docker-compose.yml

# Development URLs
API_URL=http://localhost:3000
WEB_URL=http://localhost:4200
PORT=3000

# ============================================
# DATABASE CONFIGURATION
# ============================================
# Database (for local development)
POSTGRES_DB=deepref
POSTGRES_USER=deepref
POSTGRES_PASSWORD=changeme-use-strong-password-in-production
DATABASE_HOST=localhost
DATABASE_PORT=5432
DATABASE_SSL=false

# ============================================
# REDIS CACHE CONFIGURATION
# ============================================
# Redis Connection
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=deepref_redis_dev_password
REDIS_DB=0

# Redis Performance
REDIS_TTL_DEFAULT=300
REDIS_MAX_MEMORY=256mb
REDIS_EVICTION_POLICY=allkeys-lru

# Cache Feature Flags
CACHE_ENABLED=true
CACHE_USER_PROFILES_TTL=600
CACHE_AI_PROMPTS_TTL=3600
CACHE_BUNDLES_TTL=900
CACHE_AUTH_SESSIONS_TTL=3600
CACHE_PERMISSIONS_TTL=300

# Redis Commander (GUI for debugging)
REDIS_COMMANDER_USER=admin
REDIS_COMMANDER_PASSWORD=admin

# ============================================
# CRITICAL SECURITY - MUST CONFIGURE IN PRODUCTION
# ============================================

# JWT Configuration (Generate with: node -e "console.log(require('crypto').randomBytes(64).toString('hex'))")
JWT_SECRET=CHANGE-THIS-generate-64-byte-secret-in-production
JWT_EXPIRATION=15m
JWT_REFRESH_EXPIRATION=7d

# Session Secret (Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))")
SESSION_SECRET=CHANGE-THIS-generate-32-byte-secret-in-production

# CORS Configuration
CORS_ORIGIN=http://localhost:4200,http://localhost:3000

# ============================================
# SECURITY SETTINGS
# ============================================

# Rate Limiting
THROTTLE_TTL=60000
THROTTLE_LIMIT=100

# Password Hashing
BCRYPT_SALT_ROUNDS=12

# Account Security
MAX_LOGIN_ATTEMPTS=5
ACCOUNT_LOCK_DURATION=1800000
PASSWORD_MIN_LENGTH=8
PASSWORD_REQUIRE_UPPERCASE=true
PASSWORD_REQUIRE_LOWERCASE=true
PASSWORD_REQUIRE_NUMBERS=true
PASSWORD_REQUIRE_SPECIAL=true

# Security Headers
HSTS_MAX_AGE=31536000
CSP_REPORT_URI=/api/v1/security/csp-report

# ============================================
# EMAIL CONFIGURATION
# ============================================
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_USER=your-email@gmail.com
EMAIL_PASSWORD=your-app-specific-password
EMAIL_FROM=noreply@deepref.ai

# ============================================
# FILE UPLOAD CONFIGURATION
# ============================================
MAX_FILE_SIZE=15728640
ALLOWED_FILE_TYPES=jpg,jpeg,png,pdf,doc,docx

# Local Storage (for development)
UPLOAD_DIR=./uploads

# File Encryption Key (Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))")
FILE_ENCRYPTION_KEY=CHANGE-THIS-generate-32-byte-hex-key-for-file-encryption

# ============================================
# THIRD-PARTY SERVICES
# ============================================

# OpenAI Configuration
OPENAI_API_KEY=your-openai-api-key

# ============================================
# AWS S3 STORAGE CONFIGURATION
# ============================================
# Note: Leave AWS_S3_BUCKET empty to use local storage for development

# AWS Credentials (for production)
AWS_REGION=us-east-1
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=

# S3 Buckets
AWS_S3_BUCKET=
AWS_S3_BACKUP_BUCKET=
AWS_S3_ARCHIVE_BUCKET=

# S3 Storage Options
S3_STORAGE_CLASS=INTELLIGENT_TIERING
S3_ENABLE_VERSIONING=true
S3_ENABLE_ENCRYPTION=true
S3_ENABLE_REPLICATION=false

# CloudFront (optional - for CDN)
CLOUDFRONT_DOMAIN=
CLOUDFRONT_KEY_PAIR_ID=
CLOUDFRONT_PRIVATE_KEY=

# ============================================
# ANTIVIRUS CONFIGURATION (Optional)
# ============================================
ANTIVIRUS_ENABLED=false
CLAMAV_HOST=localhost
CLAMAV_PORT=3310

# Alternative: Cloud-based antivirus
VIRUSTOTAL_API_KEY=
METADEFENDER_API_KEY=

# Security Services
HAVEIBEENPWNED_API_KEY=
RECAPTCHA_SITE_KEY=
RECAPTCHA_SECRET_KEY=

# ============================================
# MONITORING & LOGGING
# ============================================
SENTRY_DSN=
LOG_LEVEL=debug

# ============================================
# FEATURE FLAGS
# ============================================
ENABLE_2FA=false
ENABLE_MAGIC_LINKS=false
ENABLE_SOCIAL_AUTH=false

# ============================================
# CI/CD
# ============================================
CI=false
GITHUB_TOKEN=
